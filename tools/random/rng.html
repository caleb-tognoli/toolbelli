<!DOCTYPE html>
<html>
    
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS v5.2.1 -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
        crossorigin="anonymous"
    />

    <link rel="stylesheet" href="../../toolbelli.css">

<head>
    <title>RNG - toolbelli</title>

    <script>
        var display_option_visible = false

        function generate_random_numbers(amount, min, max) {
            const minCeiled = Math.ceil(min);
            const maxFloored = Math.floor(max);
            var numbers = []
            for(i = amount; i > 0; i--) {
                numbers.push(Math.floor(Math.random() * (maxFloored - minCeiled + 1) + minCeiled))
            }
            return numbers
        }

        function array_to_string(array, separator) {
            var out = ""
            for(i = 0; i < array.length; i++) {
                out += array[i]
                if(i != array.length - 1) {
                    out += separator
                }
            }
            return out
        }
    </script>
</head>

<body>
    <header class="sticky-top bg-white navbar navbar-expand-md navbar-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="../../index.html">
                <img src="../../logo.png" alt="" width="200px" class="user-select-none d-inline-block align-text-top m-2">
            </a>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item">
                    <a class="nav-link" href="../../index.html">All tools</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="../../about.html">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>



    <div class="main-section">
        <div class="container" style="max-width: 650px;">
            <h1> Random number generator </h1>

            <div class="form-group">
                <label for="amount"> Amount </label>
                <input id="amount" class="form-control" type="number" min="0" value="1"> 
            </div>

            <div class="row my-2 gx-4">
                <div class="form-group col">
                    <label for="min"> Min </label>
                    <input id="min" class="form-control" type="number" value="1"> 
                </div>
                <div class="form-group col">
                    <label for="max"> Max </label>
                    <input id="max" class="form-control" type="number" value="9"> 
                </div>
            </div>
            
            <small>
                <button class="my-2 option-button bi-caret-down-fill" 
                onclick="
                    display_option_visible = !display_option_visible
                    document.getElementById('advanced-options').style = display_option_visible ? 'display: block-inline' : 'display: none'
                "> 
                    Display options
                </button>
                
                <div id="advanced-options" class="row" style="display: none;">
                    <div class="col">
                        <div class="form-group">
                            <label for="separator"> Separator </label>
                            <div class="input-group">
                                <input id="separator" class="form-control" type="text" value="," maxlength="10"> 
                                <div class="input-group-append">
                                    <button class="btn btn-primary bi bi-arrow-counterclockwise px-3" type="button" 
                                    onclick="document.getElementById('separator').value=','"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-check"> 
                            <input class="form-check-input" name="separatorRadios" type="radio" value=" " id="" checked/>
                            <label class="form-check-label" for=""> Space </label>
                        </div>
                        <div class="form-check"> 
                            <input class="form-check-input" name="separatorRadios" type="radio" value="<br>" id="" />
                            <label class="form-check-label" for=""> New line </label>
                        </div>
                        <div class="form-check"> 
                            <input class="form-check-input" name="separatorRadios" type="radio" value="" id="" />
                            <label class="form-check-label" for=""> None </label>
                        </div>
                    </div>
                </div>
            </small>
            
            <button class="btn-primary my-3" style="width: 100%;" 
            onclick="
                var tooltip = bootstrap.Tooltip.getInstance('#copy-to-clipboard');
                tooltip.setContent({ '.tooltip-inner': 'Copy to clipboard' });

                amount = document.getElementById('amount')
                min = document.getElementById('min')
                max = document.getElementById('max')

                amount.value = Math.max(amount.value, 0)
                if (Math.ceil(min.value) > Math.ceil(max.value)) {
                    t = min.value
                    min.value = max.value
                    max.value = t
                }

                var output_div = document.getElementById('output')
                output_div.classList.remove('d-none')

                var output = document.getElementById('output-numbers')
                var stats = getElementById('output-stats')

                if (amount.value.length > 5 || min.value.length > 16 || max.value.length > 16) {
                    output.innerHTML = '&#x1F635;'
                    output_div.classList.remove('positive')
                    output_div.classList.add('negative')
                    stats.innerHTML = '<b>Oh no! Big numbers!</b>'
                }
                else {
                    output_div.classList.remove('negative')
                    output_div.classList.add('positive')

                    var date = new Date()
                    var date_string = date.getUTCFullYear() + '-' + (date.getUTCMonth()+1).toString().padStart(2, '0') + '-' + date.getUTCDate().toString().padStart(2, '0')
                    date_string += ' ' + date.getUTCHours().toString().padStart(2, '0') + ':' + date.getUTCMinutes().toString().padStart(2, '0') + ':' + date.getUTCSeconds().toString().padStart(2, '0') + ' UTC'

                    var plural = (amount.value > 1) ? 's' : ''
                    stats.innerHTML = '<b>'+date_string + '</b> Generated ' + amount.value + ' number' + plural + ' from ' + min.value + ' to ' + max.value

                    var separator = document.getElementById('separator').value + document.querySelector('input[name=\'separatorRadios\']:checked').value
                    output.innerHTML = array_to_string(generate_random_numbers(amount.value, min.value, max.value), separator)
                }   
            ">
            Generate
            </button>
        </div>
    </div>

    <div id="output" class="output-section d-none">
        <div class="container" style="max-width: 1000px;">
            <div class="row justify-content-between align-self-center">
                <div id="output-stats" class="col-auto small text-center py-3"></div>
                <button 
                    id="copy-to-clipboard"
                    type="button" 
                    class="col-auto align-self-end bi bi-clipboard pb-2 btn" 
                    style="font-size: 1.5em;" 
                    data-bs-toggle="tooltip" data-bs-placement="bottom" title="Copy to clipboard" 
                    onclick="
                        navigator.clipboard.writeText(document.getElementById('output-numbers').innerHTML)
                    
                        var tooltip = bootstrap.Tooltip.getInstance('#copy-to-clipboard');
                        tooltip.setContent({ '.tooltip-inner': 'Copied!' });
                    ">
                </button>
            </div>
            
            <div id="output-numbers" class="display-5 pb-4" style="overflow: auto"></div>
        </div>
    </div>

    <!-- Bootstrap JavaScript Libraries -->
    <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"
    ></script>

    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"
    ></script>

    <script>
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
        })
    </script>

</body>
</html>